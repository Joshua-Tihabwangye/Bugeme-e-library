import{j as e,L as n}from"./index-BrKjOGpc.js";import{u as d}from"./useQuery-BaEuwe5n.js";import{b as c}from"./reading-Co7X6AH1.js";import{e as x}from"./react-vendor-BXWpoY3z.js";import{R as m,C as h,T as p,p as j}from"./generateCategoricalChart-BZoSG4To.js";import{P as g,a as f}from"./PieChart-CxgaPNGU.js";import"./ui-vendor-DIXPZkrp.js";import"./tiny-invariant-CopsF_GD.js";const l=["#8b5cf6","#3b82f6","#10b981","#f59e0b","#ef4444","#ec4899"],R=()=>{const r=x(),{data:o,isLoading:i}=d({queryKey:["analytics"],queryFn:()=>c(),staleTime:5*60*1e3});if(i)return e.jsx(n,{label:"Loading completion stats"});const t=o?.completion_stats||{rate:0,total:0,completed:0,by_category:[]},s=t.by_category||[];return e.jsxs("div",{className:"space-y-8 animate-in",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>r("/dashboard"),className:"rounded-full p-2 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:e.jsx("svg",{className:"h-6 w-6 text-slate-600 dark:text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.4em] text-brand-600 dark:text-brand-400",children:"Analytics"}),e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Completion Rate"})]})]}),e.jsxs("div",{className:"card p-8 text-center bg-gradient-to-br from-cyan-500 to-blue-600 text-white border-none",children:[e.jsxs("h2",{className:"text-5xl font-bold mb-2",children:[t.rate,"%"]}),e.jsx("p",{className:"text-cyan-100 text-lg",children:"Books Completed"}),e.jsxs("div",{className:"mt-6 flex justify-center gap-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:t.completed}),e.jsx("p",{className:"text-sm text-cyan-100",children:"Finished"})]}),e.jsx("div",{className:"h-12 w-px bg-white/20"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:t.total}),e.jsx("p",{className:"text-sm text-cyan-100",children:"Total Started"})]})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4",children:"What is Completion Rate?"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 leading-relaxed",children:"Your completion rate measures the percentage of books you've finished out of all the books you've started reading."}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1 rounded-full bg-emerald-100 p-1 dark:bg-emerald-900/30",children:e.jsx("svg",{className:"h-4 w-4 text-emerald-600 dark:text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:"High Rate (>80%):"})," You're a focused reader who finishes what they start."]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1 rounded-full bg-amber-100 p-1 dark:bg-amber-900/30",children:e.jsx("svg",{className:"h-4 w-4 text-amber-600 dark:text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:"Low Rate (<30%):"})," You enjoy exploring many books before committing to one."]})]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4",children:"Completed by Category"}),s.length>0?e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(m,{width:"100%",height:"100%",children:e.jsxs(g,{children:[e.jsx(f,{data:s,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:s.map((b,a)=>e.jsx(h,{fill:l[a%l.length]},`cell-${a}`))}),e.jsx(p,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"8px",color:"#fff"},itemStyle:{color:"#fff"}}),e.jsx(j,{verticalAlign:"bottom",height:36})]})})}):e.jsx("div",{className:"flex h-[300px] items-center justify-center text-center",children:e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No category data available yet."})})]})]})]})};export{R as default};
