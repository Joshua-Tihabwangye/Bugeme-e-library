import{j as e,a as m,L as x,z as l}from"./index-BrKjOGpc.js";import{u}from"./useQuery-BaEuwe5n.js";import{u as p}from"./useMutation-DBZgN-6u.js";import{f as g,g as b}from"./catalog-DmW0mdZp.js";import{u as h,t as f,o as j,s as n}from"./types-BXF7fmc6.js";import"./react-vendor-BXWpoY3z.js";import"./ui-vendor-DIXPZkrp.js";const y=j({name:n().min(2,"Name is required"),description:n().optional()}),N=({onSubmit:o,isLoading:t})=>{const{register:r,handleSubmit:a,reset:s,formState:{errors:i}}=h({resolver:f(y),defaultValues:{name:"",description:""}}),d=a(async c=>{await o(c),s()});return e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-400",children:"Name"}),e.jsx("input",{...r("name"),className:"mt-2 w-full rounded-lg border border-slate-200 bg-slate-50 px-4 py-2 text-sm text-slate-900 placeholder:text-slate-400 focus:border-brand-400 focus:outline-none focus:ring-4 focus:ring-brand-500/10",placeholder:"e.g. Computer Science"}),i.name&&e.jsx("p",{className:"mt-1 text-xs text-red-400",children:i.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-400",children:"Description"}),e.jsx("textarea",{...r("description"),className:"mt-2 w-full rounded-lg border border-slate-200 bg-slate-50 px-4 py-2 text-sm text-slate-900 placeholder:text-slate-400 focus:border-brand-400 focus:outline-none focus:ring-4 focus:ring-brand-500/10",rows:3}),i.description&&e.jsx("p",{className:"mt-1 text-xs text-red-400",children:i.description.message})]}),e.jsx("button",{type:"submit",className:"btn-primary text-sm",disabled:t,children:t?"Savingâ€¦":"Add Category"})]})},F=()=>{const o=m(),{data:t,isPending:r}=u({queryKey:["categories"],queryFn:b,staleTime:5*60*1e3}),a=p({mutationFn:g,onSuccess:()=>{l.success("Category created"),o.invalidateQueries({queryKey:["categories"]})},onError:()=>l.error("Failed to create category")});return e.jsxs("div",{className:"grid gap-10 lg:grid-cols-[2fr_1fr]",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Categories"}),r?e.jsx(x,{label:"Loading categories"}):e.jsx("div",{className:"mt-6 space-y-3",children:(Array.isArray(t)?t:t?.results)?.map(s=>e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm dark:border-white/10 dark:bg-white/5",children:[e.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white",children:s.name}),e.jsx("p",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:s.description??"No description provided"}),e.jsxs("p",{className:"mt-1 text-[11px] font-semibold text-slate-500",children:[s.book_count??0," books"]})]},s.id))})]}),e.jsxs("div",{className:"card p-5",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Add category"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Manage your library's course categories."}),e.jsx("div",{className:"mt-4",children:e.jsx(N,{onSubmit:s=>a.mutate(s),isLoading:a.isPending})})]})]})};export{F as default};
