import{j as e,L as x}from"./index-JCKDIzil.js";import{e as h,r as m}from"./react-vendor-BXWpoY3z.js";import{u as k}from"./useQuery-CRcodGZg.js";import{a as j}from"./reading-hNSjY2OO.js";import{S as r}from"./StatCard-CrotQOgq.js";import"./ui-vendor-LNFcJBPj.js";const f=()=>{const a=h(),[l,n]=m.useState("week"),{data:s,isLoading:d}=k({queryKey:["dashboard",l],queryFn:()=>j(l),staleTime:2*60*1e3});if(d)return e.jsx(x,{label:"Fetching your activity"});if(!s)return e.jsx("div",{className:"flex min-h-[40vh] items-center justify-center text-center",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Unable to load dashboard"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Please try refreshing the page."})]})});const i=(s.completed?.length||0)+(s.in_progress?.length||0),c=i>0?Math.round((s.completed?.length||0)/i*100):0,o={today:"Today",week:"This Week",month:"This Month",year:"This Year",all:"All Time"}[l]||"This Week";return e.jsxs("div",{className:"space-y-8 animate-in",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end justify-between gap-4",children:[e.jsxs("div",{className:"page-header m-0",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.4em] text-brand-600 dark:text-brand-400",children:"Personal Dashboard"}),e.jsx("h1",{className:"page-title",children:"Reading Insights"}),e.jsx("p",{className:"page-subtitle",children:"Track your progress and discover your reading patterns"})]}),e.jsxs("select",{value:l,onChange:t=>n(t.target.value),className:"rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm font-medium text-slate-700 dark:border-white/10 dark:bg-slate-800 dark:text-white min-w-[140px]",children:[e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"}),e.jsx("option",{value:"year",children:"This Year"}),e.jsx("option",{value:"all",children:"All Time"})]})]}),e.jsxs("section",{className:"grid gap-4 grid-cols-2 sm:grid-cols-3 lg:grid-cols-5",children:[e.jsx("div",{onClick:()=>a("/books/completed"),className:"cursor-pointer transition-transform hover:scale-105",children:e.jsx(r,{variant:"blue",label:"Books Completed",value:s?.stats.total_books_read,icon:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),hint:o})}),e.jsx("div",{onClick:()=>a("/analytics/pages"),className:"cursor-pointer transition-transform hover:scale-105",children:e.jsx(r,{variant:"emerald",label:"Pages Read",value:`${s?.stats.total_pages_read||0}`,icon:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),hint:o})}),e.jsx("div",{onClick:()=>a("/analytics/time"),className:"cursor-pointer transition-transform hover:scale-105",children:e.jsx(r,{variant:"violet",label:"Time Reading",value:`${((s?.stats.total_time_seconds||0)/3600).toFixed(1)}h`,icon:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),hint:o})}),e.jsx("div",{onClick:()=>a("/analytics/streak"),className:"cursor-pointer transition-transform hover:scale-105",children:e.jsx(r,{variant:"amber",label:"Current Streak",value:`${s?.stats.current_streak_days||0}`,icon:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),hint:"Days in a row"})}),e.jsx("div",{onClick:()=>a("/analytics/completion"),className:"cursor-pointer transition-transform hover:scale-105",children:e.jsx(r,{variant:"cyan",label:"Completion Rate",value:`${c}%`,icon:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),hint:"Learn more"})})]}),e.jsxs("section",{className:"grid gap-6 grid-cols-1 md:grid-cols-2 xl:grid-cols-3",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"In Progress"}),e.jsxs("span",{className:"badge badge-blue",children:[s.in_progress?.length||0," ",s.in_progress?.length===1?"book":"books"]})]}),s.in_progress&&s.in_progress.length>0?e.jsx("ul",{className:"space-y-4 max-h-80 overflow-y-auto",children:s.in_progress.map(t=>e.jsxs("li",{onClick:()=>a(`/reader/${t.book}`),className:"group cursor-pointer rounded-xl border border-slate-200 bg-slate-50 p-4 transition-all duration-300 hover:border-brand-300 hover:bg-brand-50 hover:shadow-lg dark:border-white/5 dark:bg-slate-800/50 dark:hover:bg-slate-800",children:[e.jsxs("div",{className:"mb-2 flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white truncate",children:t.book_title??t.book}),e.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap",children:[e.jsxs("p",{className:"text-xs font-medium text-brand-600 dark:text-brand-400",children:[Math.round(t.percent),"% complete"]}),t.current_page>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-slate-400",children:"â€¢"}),e.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Page ",t.current_page]})]})]})]}),e.jsx("svg",{className:"h-5 w-5 text-slate-400 transition-transform group-hover:translate-x-1 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${t.percent}%`}})})]},t.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"rounded-full bg-slate-100 p-4 dark:bg-slate-800",children:e.jsx("svg",{className:"h-8 w-8 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),e.jsx("p",{className:"mt-4 text-sm font-medium text-slate-600 dark:text-slate-400",children:"No books in progress"}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-500",children:"Start reading to see your progress here"})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Liked Books"}),e.jsxs("span",{className:"badge badge-rose",children:[s.liked_books?.length||0," ",s.liked_books?.length===1?"book":"books"]})]}),s.liked_books&&s.liked_books.length>0?e.jsx("ul",{className:"space-y-4 max-h-80 overflow-y-auto",children:s.liked_books.map(t=>e.jsx("li",{onClick:()=>a(`/catalog/${t.id}`),className:"group cursor-pointer rounded-xl border border-slate-200 bg-slate-50 p-4 transition-all duration-300 hover:border-rose-300 hover:bg-rose-50 dark:border-white/5 dark:bg-slate-800/50 dark:hover:bg-slate-800",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white truncate",children:t.title}),e.jsx("p",{className:"mt-1 text-xs text-slate-600 dark:text-slate-400",children:t.author}),e.jsxs("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-500",children:["Liked on ",new Date(t.created_at).toLocaleDateString()]})]}),e.jsx("svg",{className:"h-5 w-5 text-rose-500 shrink-0",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})]})},t.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"rounded-full bg-slate-100 p-4 dark:bg-slate-800",children:e.jsx("svg",{className:"h-8 w-8 text-slate-400",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})}),e.jsx("p",{className:"mt-4 text-sm font-medium text-slate-600 dark:text-slate-400",children:"No liked books"}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-500",children:"Like books to see them here"})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Bookmarked"}),e.jsxs("span",{className:"badge badge-violet",children:[s.bookmarked_books?.length||0," ",s.bookmarked_books?.length===1?"book":"books"]})]}),s.bookmarked_books&&s.bookmarked_books.length>0?e.jsx("ul",{className:"space-y-4 max-h-80 overflow-y-auto",children:s.bookmarked_books.slice(0,5).map(t=>e.jsx("li",{onClick:()=>a(`/catalog/${t.id}`),className:"group cursor-pointer rounded-xl border border-slate-200 bg-slate-50 p-4 transition-all duration-300 hover:border-violet-300 hover:bg-violet-50 dark:border-white/5 dark:bg-slate-800/50 dark:hover:bg-slate-800",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white truncate",children:t.title}),e.jsx("p",{className:"mt-1 text-xs text-slate-600 dark:text-slate-400",children:t.author}),e.jsxs("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-500",children:["Bookmarked on ",new Date(t.created_at).toLocaleDateString()]})]}),e.jsx("svg",{className:"h-5 w-5 text-violet-500 shrink-0",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})]})},t.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"rounded-full bg-slate-100 p-4 dark:bg-slate-800",children:e.jsx("svg",{className:"h-8 w-8 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})}),e.jsx("p",{className:"mt-4 text-sm font-medium text-slate-600 dark:text-slate-400",children:"No bookmarked books"}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-500",children:"Bookmark books to see them here"})]})]})]})]})};export{f as default};
