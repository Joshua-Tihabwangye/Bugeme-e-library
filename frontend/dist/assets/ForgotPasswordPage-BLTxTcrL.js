import{c as k,z as l,j as e}from"./index-C_R6iRdk.js";import{u as y,t as f,o as g,s as j}from"./types-BXF7fmc6.js";import{r as i,e as N,L as o}from"./react-vendor-BXWpoY3z.js";import"./ui-vendor-DTvEXM4H.js";const w=g({email:j().email("Please enter a valid email address")}),E=()=>{const[d,n]=i.useState(!1),[t,s]=i.useState(!1),c=N(),{register:m,handleSubmit:x,formState:{errors:a},getValues:u}=y({resolver:f(w)}),h=x(async r=>{s(!0);try{await k(r.email),n(!0),l.success("Check your email for the reset code"),setTimeout(()=>{c("/reset-code",{state:{email:r.email}})},2e3)}catch(p){const b=p.response?.data?.error||"Failed to send reset code. Please try again.";l.error(b)}finally{s(!1)}});return d?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-slate-900 dark:text-white",children:"Check your email"}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["We've sent a verification code to ",e.jsx("span",{className:"font-semibold",children:u("email")})]})]}),e.jsx("div",{className:"rounded-xl border border-slate-300 bg-slate-50 p-4 dark:border-white/10 dark:bg-slate-900/50",children:e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Please check your email and enter the 6-digit code to reset your password.",e.jsx("span",{className:"text-amber-600 dark:text-amber-400 font-medium",children:" The code expires in 2 minutes."})]})}),e.jsx(o,{to:"/login",className:"block text-center text-sm font-semibold text-sky-700 underline underline-offset-2 hover:text-sky-800 dark:text-sky-300 dark:hover:text-sky-200",children:"Back to Login"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-slate-900 dark:text-white",children:"Forgot Password?"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Enter your email address and we'll send you a code to reset your password."})]}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-600 dark:text-slate-400",children:"Email"}),e.jsx("input",{type:"email",...m("email"),placeholder:"your.email@bugema.ac.ug",disabled:t,className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-900 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-brand-500 dark:border-white/10 dark:bg-slate-900 dark:text-white disabled:opacity-50"}),a.email&&e.jsx("p",{className:"text-xs text-red-400",children:a.email.message})]}),e.jsx("button",{type:"submit",className:"btn-primary w-full",disabled:t,children:t?"Sending...":"Send Reset Code"})]}),e.jsxs("p",{className:"text-center text-sm text-slate-600 dark:text-slate-400",children:["Remember your password?"," ",e.jsx(o,{to:"/login",className:"font-semibold text-sky-700 underline underline-offset-2 hover:text-sky-800 dark:text-sky-300 dark:hover:text-sky-200",children:"Sign in"})]})]})};export{E as default};
