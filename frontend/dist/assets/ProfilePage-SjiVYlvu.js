import{u as x,a as g,j as e,b as v}from"./index-BrKjOGpc.js";import{r as d}from"./react-vendor-BXWpoY3z.js";import{u as k}from"./useMutation-DBZgN-6u.js";import"./ui-vendor-DIXPZkrp.js";const S=()=>{const[u,o]=d.useState(!1),[l,r]=d.useState({name:"",email:"",profile_picture:null}),[m,c]=d.useState(null),t=x(a=>a.user),p=x(a=>a.setUser),h=g();d.useState(()=>{t&&r({name:t.name,email:t.email,profile_picture:null})});const n=k({mutationFn:async a=>{const s=new FormData;s.append("name",a.name),s.append("email",a.email),a.profile_picture&&s.append("profile_picture",a.profile_picture);const{data:i}=await v.patch("/auth/profile/",s,{headers:{"Content-Type":"multipart/form-data"}});return i},onSuccess:a=>{p(a),h.invalidateQueries({queryKey:["user"]}),o(!1),c(null)}}),f=a=>{a.preventDefault(),n.mutate(l)},b=()=>{t&&r({name:t.name,email:t.email,profile_picture:null}),o(!1),c(null)},j=a=>{const s=a.target.files?.[0];if(s){r({...l,profile_picture:s});const i=new FileReader;i.onloadend=()=>{c(i.result)},i.readAsDataURL(s)}};return t?e.jsxs("div",{className:"mx-auto max-w-2xl space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold text-slate-900 dark:text-white",children:"My Profile"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Manage your account information"})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[t.profile_picture?e.jsx("img",{src:t.profile_picture,alt:t.name,className:"h-20 w-20 rounded-full object-cover"}):e.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-brand-500 text-3xl font-bold text-white",children:t.name?.[0]?.toUpperCase()||t.email?.[0]?.toUpperCase()}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:t.name}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:t.email}),e.jsx("p",{className:"mt-1 text-xs text-slate-400 dark:text-slate-500 capitalize",children:t.role.toLowerCase()})]})]}),u?e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Profile Picture"}),e.jsxs("div",{className:"mt-2 flex items-center gap-4",children:[m||t.profile_picture?e.jsx("img",{src:m||t.profile_picture||"",alt:"Preview",className:"h-20 w-20 rounded-full object-cover"}):e.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-brand-500 text-2xl font-bold text-white",children:t.name?.[0]?.toUpperCase()||t.email?.[0]?.toUpperCase()}),e.jsx("input",{type:"file",accept:"image/*",onChange:j,className:"text-sm text-slate-600 file:mr-4 file:rounded-lg file:border-0 file:bg-brand-500 file:px-4 file:py-2 file:text-sm file:font-semibold file:text-white hover:file:bg-brand-600 dark:text-slate-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Name"}),e.jsx("input",{type:"text",value:l.name,onChange:a=>r({...l,name:a.target.value}),className:"mt-1 w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500/20 dark:border-white/10 dark:bg-slate-900 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Email"}),e.jsx("input",{type:"email",value:l.email,onChange:a=>r({...l,email:a.target.value}),className:"mt-1 w-full rounded-lg border border-slate-300 bg-white px-4 py-2 text-slate-900 focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500/20 dark:border-white/10 dark:bg-slate-900 dark:text-white",required:!0})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"submit",disabled:n.isPending,className:"rounded-lg bg-brand-500 px-4 py-2 text-sm font-semibold text-white transition hover:bg-brand-600 disabled:opacity-50",children:n.isPending?"Saving...":"Save Changes"}),e.jsx("button",{type:"button",onClick:b,className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 transition hover:bg-slate-100 dark:border-white/10 dark:text-white dark:hover:bg-white/5",children:"Cancel"})]}),n.isError&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:"Failed to update profile. Please try again."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-500 dark:text-slate-400",children:"Name"}),e.jsx("p",{className:"mt-1 text-slate-900 dark:text-white",children:t.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-500 dark:text-slate-400",children:"Email"}),e.jsx("p",{className:"mt-1 text-slate-900 dark:text-white",children:t.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-500 dark:text-slate-400",children:"Role"}),e.jsx("p",{className:"mt-1 text-slate-900 dark:text-white capitalize",children:t.role.toLowerCase()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-500 dark:text-slate-400",children:"Account Status"}),e.jsx("p",{className:"mt-1 text-slate-900 dark:text-white",children:t.is_active?"Active":"Inactive"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-500 dark:text-slate-400",children:"Member Since"}),e.jsx("p",{className:"mt-1 text-slate-900 dark:text-white",children:new Date(t.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.jsx("button",{onClick:()=>o(!0),className:"rounded-lg bg-brand-500 px-4 py-2 text-sm font-semibold text-white transition hover:bg-brand-600",children:"Edit Profile"})]})]})]}):e.jsx("div",{className:"flex min-h-[40vh] items-center justify-center",children:e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Please log in to view your profile."})})};export{S as default};
