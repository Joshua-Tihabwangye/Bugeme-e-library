import{j as e,L as y}from"./index-C_R6iRdk.js";import{e as w,r as i}from"./react-vendor-BXWpoY3z.js";import{u as S}from"./useQuery-DjejrF76.js";import{a as L}from"./reading-DOssLxpU.js";import"./ui-vendor-DTvEXM4H.js";const A=()=>{const c=w(),[s,x]=i.useState(new Date().getMonth()),[r,m]=i.useState(new Date().getFullYear()),{data:d,isLoading:h}=S({queryKey:["dashboard"],queryFn:()=>L(),staleTime:2*60*1e3}),u=i.useMemo(()=>{if(!d?.stats?.streak_history)return[];const t=d.stats.streak_history||[],l=new Set(t.filter(a=>a.read).map(a=>a.date)),f=new Date(r,s,1),v=new Date(r,s+1,0).getDate(),N=f.getDay(),n=[];for(let a=0;a<N;a++)n.push({date:null,read:!1});for(let a=1;a<=v;a++){const o=`${r}-${String(s+1).padStart(2,"0")}-${String(a).padStart(2,"0")}`;n.push({date:o,day:a,read:l.has(o)})}return n},[d,s,r]);if(h)return e.jsx(y,{label:"Loading streak data"});const g=d?.stats?.current_streak_days||0,p=d?.stats?.longest_streak_days||0,b=["January","February","March","April","May","June","July","August","September","October","November","December"],k=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],j=[2025,2026,2027,2028,2029,2030];return e.jsxs("div",{className:"space-y-8 animate-in",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>c("/dashboard"),className:"rounded-full p-2 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:e.jsx("svg",{className:"h-6 w-6 text-slate-600 dark:text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.4em] text-brand-600 dark:text-brand-400",children:"Analytics"}),e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Reading Streak"})]})]}),e.jsxs("div",{className:"grid gap-6 sm:grid-cols-2",children:[e.jsx("div",{className:"card p-6 bg-gradient-to-br from-amber-500 to-orange-600 text-white border-none",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"rounded-full bg-white/20 p-3",children:e.jsx("svg",{className:"h-8 w-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-amber-100",children:"Current Streak"}),e.jsxs("h2",{className:"text-3xl font-bold",children:[g," Days"]})]})]})}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"rounded-full bg-slate-100 p-3 dark:bg-slate-800",children:e.jsx("svg",{className:"h-8 w-8 text-slate-600 dark:text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Longest Streak"}),e.jsxs("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:[p," Days"]})]})]})})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Reading Calendar"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("select",{value:s,onChange:t=>x(parseInt(t.target.value)),className:"rounded-lg border border-slate-200 bg-white px-3 py-1.5 text-sm font-medium text-slate-700 dark:border-white/10 dark:bg-slate-800 dark:text-white",children:b.map((t,l)=>e.jsx("option",{value:l,children:t},t))}),e.jsx("select",{value:r,onChange:t=>m(parseInt(t.target.value)),className:"rounded-lg border border-slate-200 bg-white px-3 py-1.5 text-sm font-medium text-slate-700 dark:border-white/10 dark:bg-slate-800 dark:text-white",children:j.map(t=>e.jsx("option",{value:t,children:t},t))})]})]}),e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:k.map(t=>e.jsx("div",{className:"text-center text-xs font-medium text-slate-400 dark:text-slate-500",children:t},t))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:u.map((t,l)=>e.jsx("div",{className:`h-8 w-8 mx-auto flex items-center justify-center rounded-full text-xs font-medium transition-all
                                ${t.date?t.read?"bg-amber-500 text-white shadow-sm shadow-amber-500/30":"bg-slate-100 text-slate-500 dark:bg-slate-800 dark:text-slate-400":""}`,children:t.day||""},l))}),e.jsxs("div",{className:"mt-6 flex items-center justify-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-4 w-4 rounded-full bg-amber-500"}),e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Reading day"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-4 w-4 rounded-full bg-slate-100 dark:bg-slate-800"}),e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"No reading"})]})]})]}),e.jsx("div",{className:"card p-6 bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border-amber-200 dark:border-amber-800",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"h-6 w-6 text-amber-600 dark:text-amber-400 shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-amber-900 dark:text-amber-100",children:"Keep Your Streak Going!"}),e.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200 mt-1",children:"Read at least one page every day to maintain your streak. Even a few minutes of reading counts!"})]})]})})]})};export{A as default};
