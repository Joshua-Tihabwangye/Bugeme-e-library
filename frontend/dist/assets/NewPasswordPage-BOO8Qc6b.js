import{e as N,z as x,j as s}from"./index-BrKjOGpc.js";import{u as P,t as v,o as S,s as m}from"./types-BXF7fmc6.js";import{r as l,e as E,u as z,L as C}from"./react-vendor-BXWpoY3z.js";import{E as w,r as p}from"./ui-vendor-DIXPZkrp.js";const L=S({password:m().min(6,"Password must be at least 6 characters"),confirmPassword:m()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),M=()=>{const[e,u]=l.useState(!1),[d,h]=l.useState(!1),[t,n]=l.useState(!1),i=E(),f=z(),{email:a,code:r}=f.state||{};l.useEffect(()=>{(!a||!r)&&i("/forgot-password")},[a,r,i]);const{register:c,handleSubmit:b,formState:{errors:o}}=P({resolver:v(L)}),g=b(async j=>{if(!(!a||!r)){n(!0);try{await N(a,r,j.password),x.success("Password reset successfully! You can now login."),i("/login")}catch(y){const k=y.response?.data?.error||"Failed to reset password. Please try again.";x.error(k)}finally{n(!1)}}});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-slate-900 dark:text-white",children:"Set New Password"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Enter your new password below."})]}),s.jsxs("form",{onSubmit:g,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-600 dark:text-slate-400",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:e?"text":"password",...c("password"),placeholder:"Enter new password",disabled:t,className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-900 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-brand-500 dark:border-white/10 dark:bg-slate-900 dark:text-white disabled:opacity-50"}),s.jsx("button",{type:"button",onClick:()=>u(!e),className:"absolute right-3 top-[18px] text-slate-400 hover:text-slate-600 dark:hover:text-white",children:e?s.jsx(w,{size:16}):s.jsx(p,{size:16})})]}),o.password&&s.jsx("p",{className:"text-xs text-red-400",children:o.password.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-600 dark:text-slate-400",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:d?"text":"password",...c("confirmPassword"),placeholder:"Confirm new password",disabled:t,className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-4 py-2 text-sm text-slate-900 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-brand-500 dark:border-white/10 dark:bg-slate-900 dark:text-white disabled:opacity-50"}),s.jsx("button",{type:"button",onClick:()=>h(!d),className:"absolute right-3 top-[18px] text-slate-400 hover:text-slate-600 dark:hover:text-white",children:d?s.jsx(w,{size:16}):s.jsx(p,{size:16})})]}),o.confirmPassword&&s.jsx("p",{className:"text-xs text-red-400",children:o.confirmPassword.message})]}),s.jsx("button",{type:"submit",className:"btn-primary w-full",disabled:t,children:t?"Resetting...":"Reset Password"})]}),s.jsxs("p",{className:"text-center text-sm text-slate-600 dark:text-slate-400",children:["Remember your password?"," ",s.jsx(C,{to:"/login",className:"font-semibold text-sky-700 underline underline-offset-2 hover:text-sky-800 dark:text-sky-300 dark:hover:text-sky-200",children:"Sign in"})]})]})};export{M as default};
